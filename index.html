<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Code Playground IDE</title>

<style>
body{
margin:0;
font-family:Segoe UI;
background:#0d1117;
color:white;
height:100vh;
display:flex;
flex-direction:column;
}

header{
background:#161b22;
padding:12px;
font-size:18px;
font-weight:bold;
}

.toolbar{
background:#161b22;
padding:8px;
display:flex;
gap:10px;
}

button{
padding:6px 12px;
border:none;
border-radius:4px;
cursor:pointer;
background:#238636;
color:white;
}

.container{
flex:1;
display:flex;
}

/* Editor */
.editor{
width:50%;
display:flex;
flex-direction:column;
border-right:1px solid #30363d;
}

.tabs{
display:flex;
background:#161b22;
}

.tab{
padding:10px 20px;
cursor:pointer;
}

.tab.active{
border-bottom:2px solid #2ea043;
}

/* Code Area */
.code-wrapper{
flex:1;
display:flex;
position:relative;
}

/* Line Numbers */
.line-numbers{
width:50px;
background:#161b22;
color:#8b949e;
padding:12px 5px;
text-align:right;
font-family:monospace;
font-size:14px;
overflow:hidden;
user-select:none;
}

/* Textarea */
textarea{
flex:1;
background:#0d1117;
color:#c9d1d9;
border:none;
padding:12px;
font-family:monospace;
font-size:14px;
outline:none;
resize:none;
overflow:auto;
}

/* Output */
.output{
width:50%;
display:flex;
flex-direction:column;
}

iframe{
flex:1;
border:none;
background:white;
}

.console{
height:120px;
background:black;
color:#00ff88;
font-family:monospace;
overflow:auto;
padding:8px;
}
</style>
</head>

<body>

<header>ðŸ’» Code Playground IDE</header>

<div class="toolbar">
<button onclick="runCode()">â–¶ Run</button>
<button onclick="copyCode()">ðŸ“‹ Copy</button>
<button onclick="clearCode()">ðŸ—‘ Clear</button>
</div>

<div class="container">

<div class="editor">

<div class="tabs">
<div class="tab active" onclick="switchTab('html')">HTML</div>
<div class="tab" onclick="switchTab('css')">CSS</div>
<div class="tab" onclick="switchTab('js')">JS</div>
</div>

<!-- HTML -->
<div class="code-wrapper">
<div class="line-numbers" id="html-lines"></div>
<textarea id="html"></textarea>
</div>

<!-- CSS -->
<div class="code-wrapper" style="display:none">
<div class="line-numbers" id="css-lines"></div>
<textarea id="css"></textarea>
</div>

<!-- JS -->
<div class="code-wrapper" style="display:none">
<div class="line-numbers" id="js-lines"></div>
<textarea id="js"></textarea>
</div>

</div>

<div class="output">
<iframe id="output"></iframe>
<div class="console" id="console">Console Output...</div>
</div>

</div>

<script>

let tabs=["html","css","js"];
let currentTab="html";

/* Switch Tab */
function switchTab(tab){

document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
event.target.classList.add("active");

document.querySelectorAll(".code-wrapper").forEach(c=>c.style.display="none");

let index=tabs.indexOf(tab);
document.querySelectorAll(".code-wrapper")[index].style.display="flex";

currentTab=tab;
}

/* Line Numbers */
function updateLines(id){

let textarea=document.getElementById(id);
let lines=document.getElementById(id+"-lines");

let count=textarea.value.split("\n").length;

let numbers="";
for(let i=1;i<=count;i++){
numbers+=i+"<br>";
}

lines.innerHTML=numbers;
}

/* Sync Scroll */
function syncScroll(id){
let textarea=document.getElementById(id);
let lines=document.getElementById(id+"-lines");

lines.scrollTop=textarea.scrollTop;
}

/* Run Code */
function runCode(){

let html=document.getElementById("html").value;
let css="<style>"+document.getElementById("css").value+"</style>";
let js=document.getElementById("js").value;

document.getElementById("console").innerHTML="";

let code=`
${html}
${css}
<script>
const log=(...args)=>{
parent.document.getElementById("console").innerHTML+=args.join(" ")+"<br>";
};
console.log=log;

try{
${js}
}catch(e){
log("Error:",e.message);
}
<\/script>
`;

document.getElementById("output").srcdoc=code;
}

/* Copy */
function copyCode(){
navigator.clipboard.writeText(document.getElementById(currentTab).value);
}

/* Clear */
function clearCode(){
document.getElementById(currentTab).value="";
updateLines(currentTab);
}

/* Event Listeners */
tabs.forEach(id=>{

let textarea=document.getElementById(id);

textarea.addEventListener("input",()=>{
updateLines(id);
runCode();
});

textarea.addEventListener("scroll",()=>{
syncScroll(id);
});

updateLines(id);

});

</script>

</body>
</html>
