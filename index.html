<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ultimate Code Playground</title>

<style>
body{
margin:0;
font-family:Segoe UI;
background:#0d1117;
color:white;
height:100vh;
display:flex;
flex-direction:column;
}

header{
background:#161b22;
padding:12px;
font-size:18px;
font-weight:bold;
}

.toolbar{
background:#161b22;
padding:8px;
display:flex;
gap:10px;
}

button{
padding:6px 12px;
border:none;
border-radius:4px;
cursor:pointer;
background:#238636;
color:white;
}

button:hover{
background:#2ea043;
}

.container{
flex:1;
display:flex;
}

.editor{
width:50%;
display:flex;
flex-direction:column;
border-right:1px solid #30363d;
}

.tabs{
display:flex;
background:#161b22;
}

.tab{
padding:10px 20px;
cursor:pointer;
}

.tab.active{
border-bottom:2px solid #2ea043;
}

textarea{
flex:1;
background:#0d1117;
color:#c9d1d9;
border:none;
padding:12px;
font-family:monospace;
font-size:14px;
outline:none;
resize:none;
}

.output{
width:50%;
display:flex;
flex-direction:column;
}

iframe{
flex:1;
border:none;
background:white;
}

.console{
height:120px;
background:black;
color:#00ff88;
font-family:monospace;
overflow:auto;
padding:8px;
}
</style>
</head>

<body>

<header>ðŸ’» Ultimate Code Playground</header>

<div class="toolbar">
<button onclick="runCode()">â–¶ Run</button>
<button onclick="copyCode()">ðŸ“‹ Copy</button>
<button onclick="pasteCode()">ðŸ“¥ Paste</button>
<button onclick="clearCode()">ðŸ—‘ Clear</button>
<button onclick="saveProject()">ðŸ’¾ Save</button>
<button onclick="openProject()">ðŸ“‚ Open</button>
<input type="file" id="fileInput" hidden>
</div>

<div class="container">

<div class="editor">

<div class="tabs">
<div class="tab active" onclick="switchTab('html')">HTML</div>
<div class="tab" onclick="switchTab('css')">CSS</div>
<div class="tab" onclick="switchTab('js')">JS</div>
</div>

<textarea id="html"></textarea>
<textarea id="css" style="display:none"></textarea>
<textarea id="js" style="display:none"></textarea>

</div>

<div class="output">
<iframe id="output"></iframe>
<div class="console" id="console">Console Output...</div>
</div>

</div>

<script>

let currentTab="html";

/* Tab Switch */
function switchTab(tab){

document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
event.target.classList.add("active");

["html","css","js"].forEach(id=>{
document.getElementById(id).style.display="none";
});

document.getElementById(tab).style.display="block";
currentTab=tab;
}

/* Run Code */
function runCode(){

let html=document.getElementById("html").value;
let css="<style>"+document.getElementById("css").value+"</style>";
let js=document.getElementById("js").value;

document.getElementById("console").innerHTML="";

let code=`
${html}
${css}
<script>
const log=(...args)=>{
parent.document.getElementById("console").innerHTML+=args.join(" ")+"<br>";
};
console.log=log;

try{
${js}
}catch(e){
log("Error:",e.message);
}
<\/script>
`;

document.getElementById("output").srcdoc=code;
}

/* Copy */
function copyCode(){
navigator.clipboard.writeText(document.getElementById(currentTab).value);
alert("Copied!");
}

/* Paste */
async function pasteCode(){
let text=await navigator.clipboard.readText();
document.getElementById(currentTab).value=text;
}

/* Clear */
function clearCode(){
if(confirm("Clear all code?")){
document.getElementById("html").value="";
document.getElementById("css").value="";
document.getElementById("js").value="";
}
}

/* Save Project */
function saveProject(){

let data={
html:document.getElementById("html").value,
css:document.getElementById("css").value,
js:document.getElementById("js").value
};

let blob=new Blob([JSON.stringify(data)],{type:"application/json"});
let a=document.createElement("a");

a.href=URL.createObjectURL(blob);
a.download="project.json";
a.click();
}

/* Open Project */
function openProject(){
document.getElementById("fileInput").click();
}

document.getElementById("fileInput").addEventListener("change",function(){

let file=this.files[0];
if(!file) return;

let reader=new FileReader();

reader.onload=function(e){

let data=JSON.parse(e.target.result);

document.getElementById("html").value=data.html;
document.getElementById("css").value=data.css;
document.getElementById("js").value=data.js;

runCode();
};

reader.readAsText(file);
});

/* Auto Preview */
document.querySelectorAll("textarea").forEach(t=>{
t.addEventListener("keyup",runCode);
});

</script>

</body>
</html>
